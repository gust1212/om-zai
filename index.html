<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <script>
      const links = [
        "https://api.whatsapp.com/send?phone=9647858124757&text=السلام%20عليكم",
        "https://api.whatsapp.com/send?phone=9647851521081&text=السلام%20عليكم",
        "https://api.whatsapp.com/send?phone=9647858118125&text=السلام%20عليكم"
      ];

      // دالة ترجع قيمة باراميتر (مثلا ttclid)
      function getParam(name) {
        const p = new URLSearchParams(location.search);
        return p.get(name);
      }

      // دالة هاش بسيطة ترجع رقم ثابت من النص
      function hashString(str) {
        let h = 0;
        for (let i = 0; i < str.length; i++) {
          h = (h * 31 + str.charCodeAt(i)) | 0;
        }
        return Math.abs(h);
      }

      // نقرأ ttclid من تيك توك إذا موجود
      const clickId = getParam("ttclid");
      let index;

      if (clickId) {
        // توزيع عالمي متساوي
        index = hashString(clickId) % links.length;
      } else {
        // fallback: توزيع عشوائي
        index = Math.floor(Math.random() * links.length);
      }

      // نحول المستخدم للرابط
      window.location.href = links[index];
    </script>
    <title>جاري تحويلك...</title>
  </head>
  <body>
    <p>انتظر لحظة، يتم توجيهك إلى واتساب...</p>
  </body>
</html>
